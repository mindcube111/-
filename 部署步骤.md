# 🚀 快速部署步骤

## 方法 1：使用批处理脚本（最简单）⭐⭐⭐⭐⭐

### 步骤：

1. **双击运行** `快速部署.bat`
   - 脚本会自动检查环境
   - 如果需要登录，会自动打开浏览器
   - 然后自动执行部署

2. **等待部署完成**
   - 通常需要 1-3 分钟
   - 部署成功会显示访问地址

---

## 方法 2：使用 PowerShell 脚本

### 步骤：

1. **打开 PowerShell**
   - 在项目目录右键 → "在终端中打开"

2. **运行部署脚本**
   ```powershell
   .\deploy.ps1
   ```

3. **选择选项**
   - 输入 `1` 选择"直接部署"

---

## 方法 3：手动使用 Wrangler CLI

### 步骤：

1. **打开 PowerShell 或 CMD**
   ```powershell
   cd "c:\Users\26872\Desktop\心理网站编写\怪奇物语测试"
   ```

2. **检查登录状态**
   ```bash
   wrangler whoami
   ```
   如果未登录，运行：
   ```bash
   wrangler login
   ```

3. **执行部署**
   ```bash
   wrangler pages deploy . --project-name=stranger-things-test
   ```

---

## 方法 4：通过 Git 推送（自动部署）

### 步骤：

1. **提交更改**
   ```bash
   git add .
   git commit -m "优化：添加重试机制、数据一致性检查和批量更新支持"
   ```

2. **推送到 GitHub**
   ```bash
   git push origin main
   ```

3. **查看部署状态**
   - 访问：https://dash.cloudflare.com
   - Workers & Pages → stranger-things-test → Deployments
   - 等待 2-5 分钟自动完成

---

## 📋 部署后验证

### 1. 检查网站
访问：https://stranger-things-test.pages.dev

### 2. 检查部署日志
- Cloudflare Dashboard → Pages → stranger-things-test → Deployments
- 查看最新的部署记录和日志

### 3. 测试功能
1. 打开网站
2. 按 F12 打开开发者工具
3. 完成一次测试
4. 查看控制台日志，应该看到：
   ```
   [updateInviteCodeUsage] 邀请码使用次数已递增: ...
   [updateInviteCodeUsage] 准备发送到API: ...
   ```

---

## ⚠️ 常见问题

### 问题 1：Wrangler 未安装
**解决方法**：
```bash
npm install -g wrangler
```

### 问题 2：未登录
**解决方法**：
```bash
wrangler login
```
然后在浏览器中完成 OAuth 登录

### 问题 3：部署失败
**检查**：
1. 网络连接是否正常
2. Cloudflare 账号是否有 Pages 权限
3. 项目名称是否正确：`stranger-things-test`

---

## 🎉 部署成功标志

- ✅ 命令执行成功，显示部署 URL
- ✅ Cloudflare Dashboard 显示绿色 ✓
- ✅ 网站可以正常访问
- ✅ API 端点正常工作

---

**推荐**：直接双击运行 `快速部署.bat`，最简单快捷！
