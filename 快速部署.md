# ğŸš€ å¿«é€Ÿéƒ¨ç½²åˆ° Cloudflare Pages

## 5 åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### 1ï¸âƒ£ å®‰è£…å’Œç™»å½•ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰

```bash
# å®‰è£… Wrangler
npm install -g wrangler

# ç™»å½• Cloudflare
wrangler login
```

### 2ï¸âƒ£ åˆ›å»º KV å‘½åç©ºé—´

åœ¨ Cloudflare Dashboardï¼š
- Workers & Pages â†’ KV â†’ Create a namespace
- å‘½åï¼š`INVITE_CODES`
- è®°å½• **Namespace ID**

### 3ï¸âƒ£ å‡†å¤‡é‚€è¯·ç 

```bash
# 1. åˆ›å»º invites.txtï¼ˆæ¯è¡Œä¸€ä¸ªé‚€è¯·ç ï¼‰
# ABC123
# DEF456
# ...

# 2. ç”Ÿæˆéšæœºç›å€¼ï¼ˆè‡³å°‘ 32 å­—ç¬¦ï¼‰
# 3. è®¾ç½®ç¯å¢ƒå˜é‡å¹¶ç”Ÿæˆ bulk.json
$env:INVITE_SALT="ä½ çš„éšæœºç›å€¼"
node tools/generate-bulk.js

# 4. å¯¼å…¥åˆ° KVï¼ˆæ›¿æ¢ <NAMESPACE_ID>ï¼‰
wrangler kv:bulk put --namespace-id <NAMESPACE_ID> bulk.json
```

### 4ï¸âƒ£ åˆ›å»º Pages é¡¹ç›®

åœ¨ Cloudflare Dashboardï¼š
- Workers & Pages â†’ Create application â†’ Pages â†’ Connect to Git
- è¿æ¥ä½ çš„ Git ä»“åº“
- é¡¹ç›®åç§°ï¼š`stranger-things-test`

### 5ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡å’Œ KV

åœ¨ Pages é¡¹ç›®è®¾ç½®ä¸­ï¼š

**ç¯å¢ƒå˜é‡ï¼š**
- `ADMIN_PASSWORD`: ä½ çš„ç®¡ç†å‘˜å¯†ç 
- `INVITE_SALT`: æ­¥éª¤ 3 ä½¿ç”¨çš„ç›å€¼

**KV ç»‘å®šï¼š**
- Variable name: `INVITE_CODES`
- KV namespace: é€‰æ‹© `INVITE_CODES`

### 6ï¸âƒ£ éƒ¨ç½²

**è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰ï¼š**
- æ¨é€ä»£ç åˆ° Git ä¸»åˆ†æ”¯ï¼Œè‡ªåŠ¨éƒ¨ç½²

**æ‰‹åŠ¨éƒ¨ç½²ï¼š**
```bash
npm run deploy
# æˆ–
wrangler pages deploy . --project-name=stranger-things-test
```

### 7ï¸âƒ£ éªŒè¯

è®¿é—®ï¼š`https://stranger-things-test.pages.dev`

æµ‹è¯• APIï¼š
```bash
curl -X POST https://ä½ çš„åŸŸå/api/verify-invite \
  -H "Content-Type: application/json" \
  -d '{"code":"ABC123"}'
```

---

## ğŸ“ ä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆWindowsï¼‰

```powershell
.\deploy.ps1
```

è„šæœ¬ä¼šå¼•å¯¼ä½ å®Œæˆï¼š
- æ£€æŸ¥ç¯å¢ƒ
- éƒ¨ç½²ä»£ç 
- ç®¡ç† KV
- ç”Ÿæˆé‚€è¯·ç 

---

## âš ï¸ é‡è¦æç¤º

1. **ä¸è¦æäº¤æ•æ„Ÿæ–‡ä»¶**ï¼š`invites.txt`ã€`bulk.json` å·²åœ¨ `.gitignore` ä¸­
2. **è®°å½•é‡è¦ä¿¡æ¯**ï¼šKV Namespace IDã€INVITE_SALTã€ADMIN_PASSWORD
3. **è®¾ç½®é€Ÿç‡é™åˆ¶**ï¼šåœ¨ Cloudflare Dashboard ä¸º `/api/verify-invite` è®¾ç½®é™æµ

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [å®Œæ•´éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—.md)
- [éƒ¨ç½²æ£€æŸ¥æ¸…å•](./éƒ¨ç½²æ£€æŸ¥æ¸…å•.md)
- [æŠ€æœ¯æ–‡æ¡£](./docs/éƒ¨ç½²-Cloudflare-Workers-KV.md)

